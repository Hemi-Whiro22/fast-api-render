# render.yaml â€” Unified Tiwhanawhana Orchestrator Deployment

services:
  - type: web
    name: tiwhanawhana-backend
    env: python
    plan: starter
    region: oregon

    buildCommand: |
      pip install --upgrade pip
      pip install -r Te-Po/requirements.txt

    startCommand: uvicorn Te_Po.core.main:app --host 0.0.0.0 --port $PORT
    healthCheckPath: /health

    envVars:
      - key: DEN_URL
        sync: false
      - key: DEN_API_KEY
        sync: false
      - key: TEPUNA_URL
        sync: false
      - key: TEPUNA_API_KEY
        sync: false
      - key: OPENAI_API_KEY
        sync: false
      - key: LANG
        value: "mi_NZ.UTF-8"
      - key: LC_ALL
        value: "mi_NZ.UTF-8"
      - key: TZ
        value: "Pacific/Auckland"

# Optional microservices (for later)
#  - type: web
#    name: tiwhanawhana-ocr
#    env: python
#    startCommand: uvicorn backend.services.ocr.main:app --host 0.0.0.0 --port 8001
#  - type: web
#    name: tiwhanawhana-translate
#    env: python
#    startCommand: uvicorn backend.services.translate.main:app --host 0.0.0.0 --port 8002
